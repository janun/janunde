{% load wagtailcore_tags wagtailimages_tags srcset humanize stuff %}
{% load static from staticfiles %}

<div class="person click-area"
     itemscope itemtype="http://schema.org/Person">

  <a href="{% pageurl person %}" class="click-area__area-link">{{ person.title }}</a>

  <div class="person__photo-wrapper">
    {% if person.photo %}
      {% image person.photo fill-240x240 as fallback_image %}
      <img src="{{ fallback_image.url }}"
        srcset="{{ person.photo|srcset:'fill-264x264' }}"
        sizes="240px"
        alt="{{ original_image.alt }}"
        class="person__photo">
      <link itemprop="image" href="{{ fallback_image.url }}">
    {% else %}
      <img class="person__photo" alt="" src="{% static 'core/images/person-outline.svg' %}">
    {% endif %}
  </div>

  <div class="person__data">
    <h2 itemprop="name" class="person__name">
      {{ person.title }}
    </h2>

    {% if person.role %}
      <span class="person__role" itemprop="role">{{ person.role }}</span>
    {% endif %}
    {% if person.mail %}
      <a class="person__mail" itemprop="mail" href="mailto:{{ person.mail }}">{{ person.mail }}</a>
    {% endif %}
    {% if person.phone %}
      <a class="person__phone" itemprop="phone" href="{{ person.phone.as_rfc3966 }}">{{ person.phone|prettyphone }}</a>
    {% endif %}
  </div>

</div>
