{% load wagtailcore_tags wagtailimages_tags srcset humanize stuff %}
{% load static from staticfiles %}

<div class="person click-area"
     itemscope itemtype="http://schema.org/Person">

  <a href="{% pageurl object %}" class="click-area__area-link">{{ object.title }}</a>

  <div class="person__photo-wrapper">
    {% if object.photo %}
      {% image object.photo fill-240x240 as fallback_image %}
      <img src="{{ fallback_image.url }}"
        srcset="{{ object.photo|srcset:'fill-240x240 fill-480x480 fill-720x720 fill-960x960' }}"
        sizes="15em"
        alt="{{ fallback_image.alt }}"
        class="person__photo">
      <link itemprop="image" href="{{ fallback_image.url }}">
    {% else %}
      <img class="person__photo" alt="" src="{% static 'core/images/person-outline.svg' %}">
    {% endif %}
  </div>

  <div class="person__data">
    <h2 itemprop="name" class="person__name">
      {{ object.title }}
    </h2>

    {% if object.role %}
      <span class="person__role" itemprop="role">{{ object.role }}</span>
    {% endif %}
    {% if object.mail %}
      <a class="person__mail" itemprop="mail" href="mailto:{{ object.mail }}">{{ object.mail }}</a>
    {% endif %}
    {% if object.phone %}
      <a class="person__phone" itemprop="phone" href="{{ object.phone.as_rfc3966 }}">{{ object.phone|prettyphone }}</a>
    {% endif %}
  </div>

</div>
