{% load wagtailcore_tags wagtailsearchpromotions_tags %}
{% load render_partial %}

{% get_search_promotions query_string as search_promotions %}


{% if search_results or search_promotions %}
  {% with num_results=search_results.paginator.count|add:search_promotions.count %}
    <div class="hide@until-medium">
      {% if num_results == 1 %}
        <div class="big-font">Genau <strong>ein Ergebnis!</strong></div>
      {% elif num_results < 11 %}
        <div class="big-font">Okay, wir haben <strong>{{ num_results }} Ergebnis{{ num_results|pluralize:"se" }}</strong> für dich gefunden:</div>
      {% else %}
        <div class="big-font">Uiuiui, wir haben <strong>{{ num_results }} Ergebnis{{ num_results|pluralize:"se" }}</strong> für dich gefunden:</div>
      {% endif %}
    </div>
    <div>
      <div class="hide@medium big-font">{{ num_results }} Ergebnis{{ num_results|pluralize:"se" }}</strong>:</div>
    </div>
  {% endwith %}

  {% include "search/_pagination.html" %}

  <div class="card-grid margin-top-1 clear-after">
    {% for search_promotion in search_promotions %}
      {% render_partial search_promotion.page %}
    {% endfor %}
    {% for object in search_results %}
      {% render_partial object.specific %}
    {% endfor %}
  </div>

  {% include "search/_pagination.html" %}

{% else %}
  <div class="padding-top-1 padding-bottom-3">
    {% if query_string %}
      <i class="icon-ghost color-red" style="font-size: 7rem" aria-hidden="true"></i>
      <div class="margin-bottom-3 margin-top-1 big-font">
        <div class="color-red">Sorry, Weltenbummler!</div>
        <div>Wir haben leider nichts für dich finden können…</div>
      </div>
    {% else %}
      <i class="icon-magnifier margin-right-1 color-green" style="font-size: 7rem" aria-hidden="true"></i>
      <div class="margin-bottom-3 margin-top-1 big-font">
        <div>Gib deinen Suchbegriff ein und los geht’s…</div>
      </div>
    {% endif %}
  </div>
{% endif %}
