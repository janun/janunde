<div id="map" class="map"></div>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>

<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script>

<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />

<style>
.map {
  width: 100%;
  height: 1000px;
  margin-bottom: 60px;
  margin-top: 60px;
}

.userim .map {
  position: relative;
  width: 100%;
  height: 1000px;
  height: 90vh;
}

@media (min-width: 1000px) {
  .userim .map {
    width: 1000px;
    margin-left: -180px;
    margin-right: -180px;
    height: {% widthratio value.width value.height 1000 %}px;
  }
}

.leaflet-container {
  background: #000;
}

.leaflet-control-attribution a:first-of-type {
  display: none;
}
</style>

<script>
var map = L.map('map', {
  minZoom: 2,
  maxZoom: 6,
  center:   [-80, 80],
  zoom: 3,
  crs: L.CRS.Simple,
  maxBoundsViscosity: 0.9,
  fullscreenControl: true,
});

var southWest = [0, {{ value.height }}];
var northEast = [-{{ value.width }}, 0];
var bounds = new L.LatLngBounds(southWest, northEast);
map.setMaxBounds(bounds);

L.tileLayer('{{ value.tile_url }}', {
   attribution: '{{ value.attribution|default:"" }}',
   tms: true,
}).addTo(map);
</script>
