{% load wagtailcore_tags %}
{% load menu %}
{% load static from staticfiles %}

{% get_site_root as site_root %}
{% get_menuitems parent=site_root calling_page=self as menuitems %}

<!-- begin of navbar -->
<div class="navbar navbar--green {{ navbar_class }}">
  <nav class="navbar__inner" role="navigation" aria-label="Hauptmenü">

    <!-- logo -->
    <a class="navbar__item" href="{% pageurl site_root %}">
      <img class="navbar__logo"
           alt="JANUN Logo"
           src="{% static 'core/images/components/navbar/janun_logo.svg' %}">
    </a>

    <!-- title -->
    <a href="{% pageurl site_root %}" class="navbar__item navbar__title">
      JANUN
    </a>

    <!-- collapsible menu -->
    <div id="collapsible" aria-hidden="false"
         class="navbar__item navbar__collapsible js-aria-hidden"
         data-js-aria-hidden-media="(max-width: 1023px)">
      <ul role="menubar" class="menu">
        {% for menuitem in menuitems %}
          <li role="menuitem" class="menu__item
              {% if menuitem.is_active %}menu__item--active{% endif %}">
            {% if menuitem.children %}
              <a aria-haspopup="true" aria-expanded="false"
                 href="{% pageurl menuitem %}">{{ menuitem.title }}</a>
              {% comment "we dont support dropdowns at the moment" %}
              <ul aria-hidden="true" role="menu">
                {# Include link to parent because the parent link is a drop down #}
                <li role="menuitem">
                  <a href="{% pageurl menuitem %}">
                    {{ menuitem.title }}
                  </a>
                </li>
                {% for child in menuitem.children %}
                  <li role="menuitem"><a href="{% pageurl child %}">
                    {{ child.title }}
                  </a></li>
                {% endfor %}
              </ul>
            {% endcomment %}
            {% else %}
              <a class="" href="{% pageurl menuitem %}">
                {{ menuitem.title }}
              </a>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>

    <div class="float-right">
      <!-- search form
      <form class="navbar__item"
            action="/search/" method="get">
        <input type="search" name="query" placeholder="Suche"
               {% if context.search_query %}
                 value="{{ context.search_query }}"
               {% endif %}>
      </form>-->

      <!-- menu toggle button -->
      <div class="navbar__item">
        <button class="hamburger
                       hide@large"
                type="button"
                title="Menü ein-/ausblenden"
                data-a11y-toggle="collapsible"
                aria-expanded="false">
          <span class="hamburger__inner"></span>
        </button>
      </div>
    </div>

  </nav>
</div>
<!-- end of navbar -->
