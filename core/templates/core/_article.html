{% load wagtailcore_tags nettes_datum srcset wagtailimages_tags stuff humanize cache %}

{% cache 36000 article object.id object.latest_revision_created_at object.main_image.updated_at %}
  <div class="bigcard click-area"
       itemscope itemtype="http://schema.org/Article">

    <div class="bigcard__inner">

      <a class="click-area__area-link" href="{% pageurl object %}"
         itemprop="url" title="{{ object.title }}">
        {{ object.title }}
      </a>

      {% if object.main_image %}
        {% image object.main_image fill-300x150 as image %}
        <img class="bigcard__image"
             srcset="{{ object.main_image|srcset:'fill-300x150 fill-600x300 fill-900x450 fill-1200x600' }}"
             sizes="18.75em"
             src="{{ image.url }}" alt="{{ image.alt }}">
        {% image object.main_image original as orig_image %}
        <link itemprop="image" href="{{ orig_image.url }}">
      {% else %}
        <div class="bigcard__image-placeholder bigcard__image-placeholder--color-{{ object.color }}"></div>
      {% endif %}

      {% if object.related_group %}
        <div class="bigcard__related-group related-group">
           {% image object.related_group.logo max-50x50 as group_logo %}
           <a href="{% pageurl object.related_group %}"
              title="{{ object.related_group.title }}"
              class="related-group__image-wrapper">
             {% if object.related_group.logo %}
               <img class="related-group__image" src="{{ group_logo.url }}"
                    srcset="{{ object.related_group.logo|srcset:'max-50x50 max-100x100 max-150x150 max-200x200' }}"
                    sizes="50px"
                    alt="Logo {{ object.related_group.title }}">
             {% endif %}
           </a>
           <span class="related-group__name">
             <a href="{% pageurl object.related_group %}">{{ object.related_group.title }}</a>
             schreibt:
           </span>
        </div>
      {% endif %}

      <div class="bigcard__content {% if object.related_group %}bigcard__content--padding-top{%endif%}">
        <div class="bigcard__heading">
          <h2 class="bigcard__title js-dotdotdot" itemprop="name">{{ object.title }}</h2>
          {% if object.subtitle %}
            <h3 class="bigcard__subtitle">{{ object.subtitle }}</h3>
          {% endif %}
        </div>
        {% if object.get_text and not object.subtitle %}
          <p class="bigcard__text js-dotdotdot">{{ object.get_text }}</p>
        {% endif %}
      </div>

      <div class="bigcard__footer">
        <a href="{% pageurl object %}" class="bigcard__button">Weiterlesen</a>
        <span class="">{{ object.first_published_at|date }}</span>
      </div>

    </div>

  </div>
{% endcache %}
