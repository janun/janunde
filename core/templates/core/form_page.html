{% extends "core/__base.html" %}
{% load wagtailcore_tags %}
{% load form_utils %}
{% load static from staticfiles %}

{% block body_class %}template-formpage{% endblock %}

{% block content %}

  <div class="container container--margin-top">
    <div class="text-container userim">
      <h1 class="title title--color-green">{{ page.title }}</h1>
      {{ page.intro|richtext }}
    </div>
  </div>

    <form action="{% pageurl page %}" method="POST" class="form">
      {% csrf_token %}
      {{ form.non_field_errors }}
      {% if form.errors %}<div class="color-red">Bitte überprüfe die Felder noch einmal. Felder mit Problemen sind rot gekennzeichnet.</div><br>{% endif %}

      {% for field in form %}
        {% if field.is_hidden %}{{ field }}{% else %}

        <div id="wrapper-{{field.id_for_label}}"
             class="form__fieldwrapper
             {% if field.errors %}form__fieldwrapper--has-error{% endif %}">

             {% if field|is_checkbox %}
               <div class="form__textwrapper grid-12">
                 <div class="grid-12__col-1">
                   {{ field }}
                </div>
                <div class="grid-12__col-11" style="vertical-align:baseline">
                  <label for="{{ field.id_for_label }}">
                    {{ field.label|safe }}
                    {% if field.field.required == False %} (optional){% endif %}
                  </label>
                  {% if field.help_text %}
                    <p class="form__helptext">{{ field.help_text|safe }}</p>
                    {% endif %}
                </div>
              </div>
            {% else %}
              <div class="form__textwrapper">
                <label for="{{ field.id_for_label }}">
                  {{ field.label|safe }}
                  {% if field.field.required == False %} (optional){% endif %}
                </label>
                {% if field.help_text %}
                  <p class="form__helptext">{{ field.help_text|safe }}</p>
                {% endif %}
              </div>
            {{ field }}
          {% endif %}
          {{ field.errors }}
        </div>
        {% endif %}
      {% endfor %}

      <div class="form__controls">
        <input class="button button--primary" type="submit" value="Abschicken" />
        <a href="/" class="button button--link float-right@medium">Zurück zur Startseite</a>
      </div>
    </form>
{% endblock %}

{% block extra_js %}
  <script type="text/javascript" src="{% static 'core/js/form.js' %}"></script>
{% endblock %}
